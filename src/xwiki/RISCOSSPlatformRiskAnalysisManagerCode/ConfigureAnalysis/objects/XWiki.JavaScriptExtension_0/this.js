XWikiObj(function (obj) {
    obj.setCache("forbid");
    obj.setCode("var XWiki = (function(XWiki) {\n  var getDocumentFullNameFromURI = function(uri) {\n    //Dirty hack to retrieve the risk model document name from a URI\n    var components = decodeURI(uri).replace(/\\+/g, ' ').split('/');\n    var space = components[components.length - 2];\n    var page = components[components.length - 1];\n\n    return space + \".\" + page;\n  }  \n  function init() {\n    var editSections = $$('.edit_section');\n    for(i = 0; i < editSections.length; i++) {\n      editSections[i].hide();\n    }\n\n    $('entities').on('click', function(e) {\n      if(e.target.localName == 'a') {\n        e.stop();\n        $('selectedEntityText').innerHTML = e.target.innerHTML;\n        $('entity').value = getDocumentFullNameFromURI(e.target.href);\n      }\n    });\n\n    $('riskConfigurations').on('click', function(e) {\n      if(e.target.localName == 'a') {\n        e.stop();\n        $('selectedRiskConfigurationText').innerHTML = e.target.innerHTML;\n        $('riskConfiguration').value = getDocumentFullNameFromURI(e.target.href);\n      }\n    });\n\n    $('evaluate').on('click', function(e) {\n      if($('entity').value == '') {\n        alert('Please select an entity');\n        e.stop();\n        return;\n      }\n\n      if($('riskConfiguration').value == '') {\n        alert('Please select a risk configuration');\n        e.stop();\n        return;\n      }\n\n    });\n  }\n\n  //Wait for dom load\n  (XWiki.domIsLoaded && init()) || document.observe(\"xwiki:dom:loaded\", init);\n   \n  //End XWiki augmentation\n  return XWiki;\n}(XWiki || {}))");
    obj.setName("");
    obj.setParse(false);
    obj.setUse("currentPage");
});
